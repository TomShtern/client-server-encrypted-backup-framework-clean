<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex,nofollow" />
    <title>ARCHIVED: enhanced-gui.html</title>
    <style>
      body { font-family: system-ui, -apple-system; margin: 40px; color: #e6eef4; background: #081018; }
      a { color: #58a6ff; }
      .message { max-width: 720px; margin: 0 auto; padding: 16px; border-radius: 6px; background: rgba(255,255,255,0.02); }
    </style>
  </head>
  <body>
    <div class="message">
      <h2>Archived: enhanced-gui.html</h2>
      <p>This file has been archived. The canonical client interface is <code>NewGUIforClient.html</code>.</p>
      <p>The original content was moved to <code>archived/enhanced-gui.html</code> for historical purposes.</p>
      <p>Please open <a href="NewGUIforClient.html">NewGUIforClient.html</a> to use the current UI.</p>
    </div>
  </body>
  </html>
  <style>
    /* Integration overrides for perfect cohesion */
    body {
      font-family: var(--font-body);
    }

    /* Data particles container */
    .data-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <!-- Data Flow Particles -->
  <div class="data-particles" id="dataParticles"></div>

  <!-- Toasts container -->
  <div id="toastStack" class="toast-stack" aria-live="assertive" aria-atomic="true"></div>

  <div class="container">
    <header role="banner">
      <div class="header-row">
        <div class="brand">
          <div class="name" id="appLogo" data-text="CyberBackup">CyberBackup</div>
          <div class="tag">Client Enhanced</div>
        </div>
        <output id="statusOutput" class="status-bar" aria-live="polite">
          <span id="connStatus" class="badge disconnected" title="Connection state">Disconnected</span>
          <span id="connHealth" class="text-caption" title="Round-trip latency">Latency ‚Äî</span>
          <span id="connQuality" class="chip quality-offline" title="Connection quality">‚óè Offline</span>
          <button id="themeToggle" class="interactive ghost" title="Toggle Theme" aria-label="Toggle theme">
            <span class="theme-icon">üåô</span>
          </button>
        </output>
      </div>
    </header>

    <main role="main">
      <!-- CONFIGURATION PANEL -->
      <aside class="stack stagger-in" aria-labelledby="cfgTitle">
        <div id="cfgTitle" class="phase" aria-hidden="true">Configuration</div>

        <label class="floating-label">
          Server
          <input id="serverInput" type="text" placeholder="127.0.0.1:9090" autocomplete="off" aria-describedby="serverHint" class="interactive" />
          <span class="label-text">Server Address</span>
          <div id="serverHint" class="hint text-caption" role="alert" hidden>Invalid host:port format</div>
        </label>

        <label class="floating-label">
          Username
          <input id="usernameInput" type="text" placeholder="user" autocomplete="off" aria-describedby="usernameHint" class="interactive" />
          <span class="label-text">Username</span>
          <div id="usernameHint" class="hint text-caption" role="alert" hidden>Username is required</div>
        </label>

        <div id="fileDropZone" class="file-drop-zone interactive" aria-label="File selection area" title="Drag & drop a file or use Choose File">
          <div class="row">
            <button id="fileSelectBtn" class="interactive ghost ripple" aria-controls="fileInput" aria-haspopup="dialog">
              Choose File
            </button>
            <input id="fileInput" type="file" hidden />
            <button id="recentFilesBtn" class="interactive ghost" title="Recent Files">Recent</button>
          </div>
          <div class="file-card" aria-live="polite">
            <div class="file-icon" aria-hidden="true">üìÑ</div>
            <div class="file-meta">
              <div class="file-name" id="fileName">Drag & drop a file here or choose above</div>
              <div class="file-sub text-caption" id="fileInfo">Size ‚Äî ‚Ä¢ Type ‚Äî</div>
            </div>
            <div class="file-actions">
              <button id="clearFileBtn" class="interactive ghost" disabled>Clear</button>
            </div>
          </div>
        </div>

        <details id="advancedPanel" class="interactive">
          <summary>Advanced Settings</summary>
          <div class="adv-body">
            <div class="split">
              <label class="floating-label">
                Chunk Size (MB)
                <input id="advChunkSize" type="text" placeholder="8" class="interactive" />
                <span class="label-text">Chunk Size</span>
              </label>
              <label class="floating-label">
                Retry Limit
                <input id="advRetryLimit" type="text" placeholder="3" class="interactive" />
                <span class="label-text">Retry Limit</span>
              </label>
            </div>
            <div class="row">
              <button id="advResetBtn" class="interactive ghost">Reset to defaults</button>
            </div>
          </div>
        </details>
      </aside>

      <!-- STATUS PANEL -->
      <section class="stack stagger-in" aria-labelledby="statusTitle">
        <div id="statusTitle" class="phase" aria-hidden="true">Status</div>

        <div id="phaseText" class="phase liquid-text">Idle</div>

        <div class="center">
          <div class="progress-glow"></div>
          <svg id="progressRing" viewBox="0 0 100 100" aria-hidden="true">
            <defs>
              <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#60a5fa" />
                <stop offset="50%" stop-color="#a78bfa" />
                <stop offset="100%" stop-color="#ec4899" />
              </linearGradient>
            </defs>
            <circle cx="50" cy="50" r="45" stroke="var(--bg-tertiary)" stroke-width="4" fill="none" />
            <circle id="progressArc" cx="50" cy="50" r="45" stroke="url(#progressGradient)" stroke-width="4" fill="none"
                    stroke-linecap="round" stroke-dasharray="282.743" stroke-dashoffset="282.743"
                    class="progress-fill" />
          </svg>
          <div class="kpi">
            <div id="progressPct" class="pct">0%</div>
            <div class="eta">¬∑ <span id="etaText">ETA ‚Äî</span></div>
          </div>
        </div>

        <div class="actions" aria-label="Actions">
          <button id="primaryActionBtn" class="interactive primary ripple">Connect & Start</button>
          <button id="pauseBtn" class="interactive ripple" disabled>Pause</button>
          <button id="resumeBtn" class="interactive ripple" disabled>Resume</button>
          <button id="stopBtn" class="interactive ripple" disabled>Stop</button>
        </div>

        <div id="statsGrid" aria-label="Transfer Stats">
          <div class="stat interactive">
            <div class="label">Bytes Sent</div>
            <div class="value" id="statBytes">‚Äî</div>
          </div>
          <div class="stat interactive">
            <div class="label">Speed</div>
            <div class="value" id="statSpeed">‚Äî</div>
          </div>
          <div class="stat interactive">
            <div class="label">File Size</div>
            <div class="value" id="statSize">‚Äî</div>
          </div>
          <div class="stat interactive">
            <div class="label">Elapsed</div>
            <div class="value" id="statElapsed">‚Äî</div>
          </div>
        </div>
      </section>
    </main>

    <!-- LOGS SECTION -->
    <section class="logs" aria-labelledby="logTitle">
      <div id="logTitle" class="phase heading-centered" aria-hidden="true">Activity Logs</div>
      <div class="card">
        <div class="toolbar">
          <fieldset id="logFilters" class="filter-group" aria-label="Log filters">
            <button id="filterAll" class="filter-btn interactive active" data-level="all" aria-pressed="true">All</button>
            <button id="filterInfo" class="filter-btn interactive" data-level="info">Info</button>
            <button id="filterWarn" class="filter-btn interactive" data-level="warn">Warn</button>
            <button id="filterError" class="filter-btn interactive" data-level="error">Error</button>
          </fieldset>
          <div class="row">
            <label class="row interactive" title="Autoscroll new lines">
              <input id="logAutoscrollToggle" type="checkbox" checked />
              <span>Autoscroll</span>
            </label>
            <button id="logExportBtn" class="interactive ripple">Export</button>
          </div>
        </div>
        <pre id="logContainer" aria-live="polite"></pre>
      </div>
    </section>
  </div>

  <!-- Confirm Modal -->
  <dialog id="modalConfirm" class="sr-only" aria-labelledby="modalTitle" aria-describedby="modalDesc">
    <div class="card modal-card">
      <div id="modalTitle" class="phase text-center">Confirm</div>
      <div id="modalDesc" class="muted text-center">Are you sure you want to stop the transfer?</div>
      <div class="row centered">
        <button id="modalCancelBtn" class="interactive ghost">Cancel</button>
        <button id="modalOkBtn" class="interactive primary">OK</button>
      </div>
    </div>
  </dialog>

  <!-- Screen-reader live region -->
  <div id="srLive" class="sr-only" aria-live="polite"></div>

  <!-- Enhanced Scripts -->
  <script type="module">
    // Import existing modules
    import { ThemeManager } from './scripts/services/theme-manager.js';
    import { ApiClient } from './scripts/services/api-client.js';

    // Initialize enhanced theme manager
    const themeManager = new ThemeManager(document.getElementById('themeToggle'));

    // Initialize API client
    const apiClient = new ApiClient();

    // Enhanced interaction handlers
    class EnhancedGUI {
      constructor() {
        this.initDataParticles();
        this.initRippleEffects();
        this.initFloatingLabels();
        this.initEnhancedAnimations();
        this.initFileDropZone();
      }

      initDataParticles() {
        const container = document.getElementById('dataParticles');
        const particleCount = window.innerWidth > 768 ? 15 : 8;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.animationDelay = Math.random() * 20 + 's';
          particle.style.animationDuration = (15 + Math.random() * 10) + 's';
          container.appendChild(particle);
        }
      }

      initRippleEffects() {
        const rippleElements = document.querySelectorAll('.ripple');

        rippleElements.forEach(element => {
          element.addEventListener('click', function(e) {
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;

            const ripple = document.createElement('span');
            ripple.className = 'ripple-effect';
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';

            this.appendChild(ripple);

            setTimeout(() => {
              ripple.remove();
            }, 600);
          });
        });
      }

      initFloatingLabels() {
        const floatingLabels = document.querySelectorAll('.floating-label input');

        floatingLabels.forEach(input => {
          // Check if input has value on load
          if (input.value) {
            input.classList.add('has-value');
          }

          input.addEventListener('focus', () => {
            input.classList.add('focused');
          });

          input.addEventListener('blur', () => {
            input.classList.remove('focused');
            if (!input.value) {
              input.classList.remove('has-value');
            }
          });

          input.addEventListener('input', () => {
            if (input.value) {
              input.classList.add('has-value');
            } else {
              input.classList.remove('has-value');
            }
          });
        });
      }

      initEnhancedAnimations() {
        // Staggered entrance animation
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.style.animationPlayState = 'running';
            }
          });
        }, { threshold: 0.1 });

        document.querySelectorAll('.stagger-in').forEach(el => {
          el.style.animationPlayState = 'paused';
          observer.observe(el);
        });

        // Enhanced hover effects for interactive elements
        const interactiveElements = document.querySelectorAll('.interactive');
        interactiveElements.forEach(element => {
          element.addEventListener('mouseenter', () => {
            element.style.transform = element.style.transform || '';
          });
        });
      }

      initFileDropZone() {
        const dropZone = document.getElementById('fileDropZone');
        const fileInput = document.getElementById('fileInput');
        const fileSelectBtn = document.getElementById('fileSelectBtn');

        // Enhanced drag and drop
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          dropZone.addEventListener(eventName, preventDefaults, false);
          document.body.addEventListener(eventName, preventDefaults, false);
        });

        ['dragenter', 'dragover'].forEach(eventName => {
          dropZone.addEventListener(eventName, () => {
            dropZone.classList.add('dragover');
          }, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
          dropZone.addEventListener(eventName, () => {
            dropZone.classList.remove('dragover');
          }, false);
        });

        dropZone.addEventListener('drop', handleDrop, false);
        fileSelectBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileSelect);
      }
    }

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      handleFiles(files);
    }

    function handleFileSelect(e) {
      const files = e.target.files;
      handleFiles(files);
    }

    function handleFiles(files) {
      if (files.length > 0) {
        const file = files[0];
        updateFileDisplay(file);
        showToast('File selected: ' + file.name, 'success');
      }
    }

    function updateFileDisplay(file) {
      const fileName = document.getElementById('fileName');
      const fileInfo = document.getElementById('fileInfo');
      const clearBtn = document.getElementById('clearFileBtn');

      fileName.textContent = file.name;
      fileInfo.textContent = `${formatFileSize(file.size)} ‚Ä¢ ${file.type || 'Unknown'}`;
      clearBtn.disabled = false;

      // Update file icon based on type
      const fileIcon = document.querySelector('.file-icon');
      fileIcon.textContent = getFileIcon(file.type);
    }

    function getFileIcon(type) {
      if (type.startsWith('image/')) return 'üñºÔ∏è';
      if (type.startsWith('video/')) return 'üé•';
      if (type.startsWith('audio/')) return 'üéµ';
      if (type.includes('pdf')) return 'üìÑ';
      if (type.includes('zip') || type.includes('rar')) return 'üì¶';
      if (type.includes('text')) return 'üìù';
      return 'üìÑ';
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function showToast(message, type = 'info') {
      const toastStack = document.getElementById('toastStack');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;

      toastStack.appendChild(toast);

      setTimeout(() => {
        toast.classList.add('removing');
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 3000);
    }

    // Initialize the enhanced GUI
    document.addEventListener('DOMContentLoaded', () => {
      new EnhancedGUI();

      // Log initialization - Safe DOM method
      const logContainer = document.getElementById('logContainer');
      const timestamp = new Date().toISOString();
      const logEntry = document.createElement('div');
      logEntry.textContent = `[${timestamp}] CyberBackup Enhanced Interface initialized`;
      logContainer.appendChild(logEntry);

      showToast('Enhanced interface loaded successfully', 'success');
    });
  </script>
</body>
</html>