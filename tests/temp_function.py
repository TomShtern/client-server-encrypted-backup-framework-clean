def enhanced_safe_print(message: str, show_diagnostics: bool = False) -> None:\n    \"\"\"Enhanced safe print with optional diagnostics.\n    \n    This function provides enhanced printing with optional environment\n    diagnosis for troubleshooting UTF-8 issues.\n    \n    Args:\n        message: Message to print\n        show_diagnostics: Whether to show environment diagnosis\n        \n    Usage:\n        utf8.enhanced_safe_print(\"Hello üåç\", show_diagnostics=True)\n    \"\"\"\n    if show_diagnostics:\n        diagnosis = diagnose_utf8_environment()\n        safe_print(\"UTF-8 Environment Diagnosis:\")\n        safe_print(\"==========================\")\n        for key, value in diagnosis.items():\n            if isinstance(value, dict):\n                safe_print(f\"{key}:\")\n                for sub_key, sub_value in value.items():\n                    safe_print(f\"  {sub_key}: {sub_value}\")\n            else:\n                safe_print(f\"{key}: {value}\")\n        safe_print(\"\")\n    \n    try:\n        safe_print(message)\n    except Exception as e:\n        safe_print(f\"Printing failed: {e}\")\n        # Try ultimate fallback using buffer writing\n        try:\n            sys.stdout.buffer.write(\"UTF-8 Solution: Message display failed completely\\n\".encode('utf-8'))\n            sys.stdout.buffer.flush()\n        except Exception:\n            pass